const p2r=function(){var a=new RegExp("(\\\\.)|(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?","g");const b=a=>a.length,c=(c,e={})=>{const f=[],g=delimiters=e.delimiter||"/";let h,i=0,j=0,l=!1,n="";for(;null!==(h=a.exec(c));){const[a,e,m,t,u,v]=h,w=h.index,x=c[j];let y="";if(n+=c.slice(j,w),j=w+b(a),e){n+=e[1],l=!0;continue}if(!l&&b(n)){var o=b(n)-1;-1<delimiters.indexOf(n[o])&&(y=n[o],n=n.slice(0,o))}n&&(f.push(n),n="",l=!1);var k=""!==y&&void 0!==x&&x!==y,p="+"===v||"*"===v,q="?"===v||"*"===v,r=y||g,s=t||u;f.push({n:m||i++,v:y,d:r,o:q,r:p,l:k,a:s?s.replace(/([=!:$/()])/g,"\\$1"):"[^"+d(r)+"]+?"})}return(n||j<b(c))&&f.push(n+c.substr(j)),f},d=a=>a.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),e=(a,c)=>{if(!c)return a;var d=a.source.match(/\((?!\?)/g);if(d)for(var e=0;e<b(d);e++)c.push({n:e,v:null,d:null,o:!1,r:!1,l:!1,a:null});return a},f=(a,c,e={})=>{var f=e.strict,g=d(e.delimiter||"/"),h=e.delimiters||"./",i=(e.endsWith||[]).map(d).concat("$").join("|"),j=e.start?"^":"",k=0===b(a);return a.map((e,f)=>{if("string"==typeof e)j+=d(e),k=f===b(a)-1&&-1<h.indexOf(e[b(e)-1]);else{var g=e.r?"(?:"+e.a+")(?:"+d(e.d)+"(?:"+e.a+"))*":e.a;c&&c.push(e),j+=e.o?e.l?d(e.v)+"("+g+")?":"(?:"+d(e.v)+"("+g+"))?":d(e.v)+"("+g+")"}}),e.end?(!f&&(j+="(?:"+g+")?"),j+="$"===i?"$":"(?="+i+")"):(!f&&(j+="(?:"+g+"(?="+i+"))?"),!k&&(j+="(?="+g+"|"+i+")")),new RegExp(j,e.sensitive?"":"i")};return(a,b,d)=>a instanceof RegExp?e(a,b):f(c(a,d),b,d)}(),tini=function(){const a=Response;let b={};const c=async c=>{const f=b[c.method]||[],g=new URL(c.url);for(const b of f){const f=b.r.exec(g.pathname);if(f){c.pathname=g.pathname,c.params=d(f,b.k),c.query=e(g.searchParams);for(const d of b.f){const b=await Promise.resolve(d(c));if(void 0!==b){if(b instanceof a)return b;if("string"==typeof b)return new a(b);const c=new Headers;return c.append("Content-Type","application/json"),new a(JSON.stringify(b),{headers:c})}}}}return new a("Not Found",{status:404})},d=(a,b)=>{const c={};return b.forEach((b,d)=>{c[b.n]=a[d+1]}),c},e=a=>{const b={};for(const c of a.keys()){const d=a.getAll(c);b[c]=1<d.length?d:d[0]}return b},f=(a,c,d)=>{let e=[];b[a]=(b[a]||[]).concat({r:p2r(c,e),f:d,k:e})},g={get:(a,...b)=>f("GET",a,b),post:(a,...b)=>f("POST",a,b),put:(a,...b)=>f("PUT",a,b),del:(a,...b)=>f("DELETE",a,b)};let h=!1;return a=>{addEventListener("fetch",b=>{h||(a(g),h=!0),b.respondWith(c(b.request))})}}();